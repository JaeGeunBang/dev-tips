### 작업 환경 만들기 - Docker



1.Docker Image를 만든다.

***Dockerfile***

```bash
# ubuntu 설치
FROM ubuntu:16.04
RUN apt-get update && apt-get install -y vim && apt-get install -y git && apt-get install -y wget

# WORKDIR
WORKDIR /usr/src/git/elasticsearch

# open jdk 11 설치
RUN wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz
RUN tar vxfz openjdk-11+28_linux-x64_bin.tar.gz
RUN rm openjdk-11+28_linux-x64_bin.tar.gz
RUN mv jdk-11/ /usr/share

# 환경 변수 설정
RUN echo 'export JAVA_HOME=/usr/share/jdk-11' >> ~/.bashrc
RUN echo 'export PATH=$PATH:$JAVA_HOME/bin' >> ~/.bashrc
RUN	source ~/.bashrc

# 빌드
cd /usr/share/elasticsearch
./gradlew assemble
```

- `-y 옵션`은 Y를 하기 위함. 중간에 Y를 누를수 없기 때문.

> Docker build 할 때는 `RUN`을 사용해야한다. build 후에 사용하고 싶으면 `CMD`



2.Build 한다.

``` cmd
> docker build -t elasticsearch .
```

- `-t 옵션`은 생성할 이미지의 이름을 지정하기 위함



3.elasticsearch github를 fork 뜬 후 clone 한다.

```
> git clone https://github.com/JaeGeunBang/elasticsearch.git
```

- `git config --local user.name, user.email`을 등록한다.



4.기본 실행

```cmd
> docker run -v /home/jaegeun/git/elasticsearch:/usr/src/git/elasticsearch -it elasticsearch /bin/bash
```

- `-it 옵션`은 컨테이너 내부에 들어가기 위해 bash 쉘을 실행하고 키보드를 입력하기 위함.
- `--rm 옵션`은 컨테이너 종료시 자동 컨테이너를 삭제하기 위함이다.
- `-v 옵션`에 <window git path>:<docker git path> 를 각 입력한다.



### 참고

https://subicura.com/2017/02/10/docker-guide-for-beginners-create-image-and-deploy.html
